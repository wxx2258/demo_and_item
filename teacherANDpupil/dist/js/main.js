$(document).ready(function(e){function n(){var a=n.arguments.length,o=100/a,s=e("#progress"),g=e(".loadingImg");for(i=0;i<a;i++)t[i]=new Image,t[i].src=n.arguments[i];var r=setInterval(function(){var n=t.length;0==n&&(clearInterval(r),e(".loading").remove(),e(".contain").removeClass("hide"),e(".music-btn").removeClass("hide"));for(var i=0;i<t.length;i++)if(t[i].complete){var a=parseInt(s.val()+o);s.val(a),e(".loadingvalue").text(a),g.css("left",a+"%");t.splice(i,1)}},0)}var t=new Array;n("images/screen.png","images/index-img3.png","images/btn_music.png","images/btn_music_close.png","images/screen.png","images/index_coin1.png","images/index_coin2.png","images/index-img1.png","images/index-img2.png","images/index-img4.png","images/index-img5.png","images/index-img6.png","images/btn_bg.png","images/erweima.png","images/index_bg.jpg","images/letter_bg.jpg","images/resule_bg.jpg","images/letterBtn.png","images/result_chen.png","images/rock_bg.jpg","images/rock_img1.png","images/rock_sign1.png","images/rock_sign2.png","images/zhechen.png");var a={toggleMusic:function(){e(this).hasClass("music-close-img")?(e(this).removeClass("music-close-img"),e("#musicControl")[0].play()):(e("#musicControl")[0].pause(),e(this).addClass("music-close-img"))},bindLetterBtn:function(){e(".index-page").on("tap",".letter-btn-bg",function(n){a.nextPage(e(".index-page"),e(".letter-page"))})},nextPage:function(e,n){e.remove(),n.removeClass("hide")},fallsign:function(){var n=Math.floor(6*Math.random()),t=e(".rock-page").find(".rock-signbox .rock-sign").eq(n);t.addClass("sign-fallDown"),this.showResult(n),t.bind("webkitAnimationEnd",function(n){a.nextPage(e(".rock-page"),e(".result-page"))}),t.bind("animationend",function(n){a.nextPage(e(".rock-page"),e(".result-page"))})},showResult:function(n){var t=Math.floor(6*Math.random()),i=[["杨过和小龙女","开启一段苦尽甘来的师徒之恋吧~"],["菩提老祖和孙悟空","开启一段亦师亦友的师徒之情吧~"],["花千骨和白子画","开启一段痛彻心扉的师徒之恋吧~"],["风清扬和令狐冲","上演一段相见恨晚的师徒之情吧~"],["洪七公和郭靖","开启一段赤诚相待的师徒之情吧~"]],a=i[t];console.log(n,a),e(".result-page .result-content .result-name").text(i[n][0]),e(".result-page .result-content .result-font2").text(i[n][1])}},o=function(n){var t=1500,i=100,o=0,s=curShakeY=curShakeZ=lastShakeX=lastShakeY=lastShakeZ=0,g=0,r=2;return n.init=function(){return window.DeviceMotionEvent?void window.addEventListener("devicemotion",n.begin,!1):(alert("亲，您的设备好像不支持重力感应哦！"),!1)},n.begin=function(c){var u=c.accelerationIncludingGravity,l=(new Date).getTime();if(l-o>i){var m=l-o;o=l,s=u.x,curShakeY=u.y,curShakeZ=u.z;var d=Math.abs(s+curShakeY+curShakeZ-lastShakeX-lastShakeY-lastShakeZ)/m*1e4;d>t&&g<r&&(g++,1==g?e(".rockTip").hide():(g=2)&&(navigator.vibrate?navigator.vibrate([500,100,500]):navigator.webkitVibrate&&navigator.vibrate([500,100,500]),a.fallsign(),n.over())),lastShakeX=s,lastShakeY=curShakeY,lastShakeZ=curShakeZ}},n.over=function(){window.removeEventListener("devicemotion",n.begin)},n}(window.shake||{});e(".music-btn").on("tap",".opened-music",function(n){a.toggleMusic.apply(e(this))}),e(".index-page").on("tap",".coin2",function(n){e(".show-dhz").fadeIn(500)}),e(".show-dhz").bind("tap",function(n){e(this).fadeOut(500)}),e(".birdbox").bind("webkitAnimationEnd",function(e){a.bindLetterBtn()}),e(".birdbox").bind("animationend",function(e){a.bindLetterBtn()}),e(".letter-page").on("tap",".letterBtnImg",function(n){a.nextPage(e(".letter-page"),e(".rock-page")),o.init()}),e(".result-page").on("tap","#show-invite",function(n){e(".invite-box").fadeIn(500)}),e(".invite-box").bind("tap",function(n){e(this).fadeOut(500)});var s={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,initTop:parseFloat(e(".fugai").css("top"))};console.log(s.initTop),e(".fugai").bind("touchstart",function(e){s.touchstartX=e.targetTouches[0].pageX,s.touchstartY=e.targetTouches[0].pageY}),e(".fugai").bind("touchmove",function(n){s.touchendX=n.targetTouches[0].pageX,s.touchendY=n.targetTouches[0].pageY;var t=s.touchendY-s.touchstartY+s.initTop;e(this).css({left:s.touchendX-s.touchstartX,top:t})}),e(".fugai").bind("touchend",function(){s=null,e(this).remove()})});
//# sourceMappingURL=main.js.map
